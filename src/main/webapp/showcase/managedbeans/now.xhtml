<ui:composition template="/WEB-INF/templates/showcase.xhtml"
	xmlns:f="jakarta.faces.core"
	xmlns:h="jakarta.faces.html"
	xmlns:ui="jakarta.faces.facelets"
	xmlns:o="omnifaces"
>
	<ui:define name="meta">
		<f:metadata>
			<f:attribute name="api.path" value="cdi/config/DateProducer" />
		</f:metadata>
	</ui:define>

	<ui:define name="description">
		<p>
			The builtin managed bean <code>\#{now}</code> returns you the 
			<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/temporal/Temporal.html"><code>java.time.temporal.Temporal</code></a>
			instance representing the current time in server's default time zone.
		</p>
		<p>
			The implementation is provided by <code>org.omnifaces.cdi.config.DateProducer.TemporalDate</code>
			which is essentially written as a CDI proxy for <code>java.time.ZonedDateTime</code> because it's a <code>final</code> class.
		</p>
        <p class="highlight">
            <strong>Historical notice:</strong> before OmniFaces 3.6, it returned since OmniFaces 1.0 an instance of <code>java.util.Date</code>
            via a <a href="https://github.com/omnifaces/omnifaces/blob/3.5/src/main/resources/META-INF/faces-config.xml#L70-L80" target="_blank"><code>&lt;managed-bean&gt;</code> entry in <code>faces-config.xml</code></a>.
        </p>
	</ui:define>		

	<ui:define name="demo">
		<p>
			Raw <code>Temporal#toString()</code> value of <code>\#{now}</code>: <strong>#{now}</strong> - this should represent same format as <code>java.time.ZonedDateTime</code>
		</p>
		<p>
			Formatted using <code>o:formatDate()</code> function: #{o:formatDate(now, 'yyyy-MM-dd HH:mm:ss')}
		</p>
		<hr/>
		<p>
			As <code>java.time.Instant</code>: <strong>#{now.instant}</strong> - this should represent UTC
		</p>
		<p>
			Formatted using <code>o:formatDate()</code> function: #{o:formatDate(now.instant, 'yyyy-MM-dd HH:mm:ss')}
		</p>
		<hr/>
        <p>
            As <code>java.time.ZonedDateTime</code>: <strong>#{now.zonedDateTime}</strong>
        </p>
        <p>
            Formatted using <code>o:formatDate()</code> function: #{o:formatDate(now.zonedDateTime, 'yyyy-MM-dd HH:mm:ss')}
        </p>
        <hr/>
        <p>
            As <code>java.time.LocalDateTime</code>: <strong>#{now.localDateTime}</strong>
        </p>
        <p>
            Formatted using <code>o:formatDate()</code> function: #{o:formatDate(now.localDateTime, 'yyyy-MM-dd HH:mm:ss')}
        </p>
        <hr/>
        <p>
            As <code>java.time.LocalDate</code>: <strong>#{now.localDate}</strong>
        </p>
        <p>
            Formatted using <code>o:formatDate()</code> function: #{o:formatDate(now.localDate, 'yyyy-MM-dd')}
        </p>
        <hr/>
		<p>
			As <code>epoch time</code>: <strong>#{now.time}</strong>
		</p>

		<h:form>
			<h:commandButton value="Refresh">
				<f:ajax render=":demo" />
			</h:commandButton>
		</h:form>
	</ui:define>
</ui:composition>